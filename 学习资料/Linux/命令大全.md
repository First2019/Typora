磁盘管理

**cd**（切换工作目录）

格式：cd [dirname]

示例：cd ../(返回上一级)

cd ~(跳到自己的home目录) 

cd /(跳到根目录)

**du** (用于显示目录或文件的大小。du会显示指定的目录或文件所占用的磁盘空间。)

·    -a或-all 显示目录中个别文件的大小。

·    -b或-bytes 显示目录或文件大小时，以byte为单位。

·    -c或--total 除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和。

·    -h或--human-readable 以K，M，G为单位，提高信息的可读性。

·    -k或--kilobytes 以1024 bytes为单位。

·    -m或--megabytes 以1MB为单位。

示例： 

\# du -h test（方便阅读的格式显示test目录所占空间情况：）

 

**pwd (pwd****命令用于显示工作目录。****)**

格式：pwd

示例：# pwd

返回 /home/oracle

 

**ls (****列出指定工作目录所含之文件及子目录****)**

格式：ls [-alrtAFR] [name…]

-a 显示所有文件及目录 (ls内定将文件名或目录名称开头为"."的视为隐藏档，不会列出)

-l 除文件名称外，亦将文件型态、权限、拥有者、文件大小等资讯详细列出

-r 将文件以相反次序显示(原定依英文字母次序)

-t 将文件依建立时间之先后次序列出

-A 同 -a ，但不列出 "." (目前目录) 及 ".." (父目录)

-R 若目录下有文件，则以下之文件亦皆依序列出

示例：ls -al

**mkdir (****命令用于建立子目录****)**

格式：mkdir [-p] dirName

-p 确保目录名称存在，不存在的就建一个。

示例：mkdir aaa

Mkdir -p BBB/test

(本例若不加 -p，且原本 BBB目录不存在，则产生错误。)

 

**rmdir (****删除空的目录)**

格式：rmdir [-p] dirName

-p 是当子目录被删除后使它也成为空目录的话，则顺便一并删除。

示例：rmdir AAA

 

rmdir -p BBB/test(删除名为 Test 的子目录。若 Test 删除后，BBB 目录成为空目录，则 BBB 亦予删除)

 

**rm (****rm****命令用于删除一个文件或者目录****)**

rm [options] name..

-i 删除前逐一询问确认。

-f 即使原档案属性设为唯读，亦直接删除，无需逐一确认。

-r 将目录及以下之档案亦逐一删除。

示例:rm -r * (删除当前目录下的所有文件及目录)

 (删除文件可以直接使用rm命令，若删除目录则必须配合选项"-r")

\# rm test.txt

rm：是否删除 一般文件 "test.txt"? y

\# rm homework

rm: 无法删除目录"homework": 是一个目录

\# rm -r homework

rm：是否删除 目录 "homework"? y

 

**cp (****用于复制文件或目录)**

cp [options] source dest

或

cp [options] source... directory

·    -a：此选项通常在复制目录时使用，它保留链接、文件属性，并复制目录下的所有内容。其作用等于dpR参数组合。

·    -d：复制时保留链接。这里所说的链接相当于Windows系统中的快捷方式。

·    -f：覆盖已经存在的目标文件而不给出提示。

·    -i：与-f选项相反，在覆盖目标文件之前给出提示，要求用户确认是否覆盖，回答"y"时目标文件将被覆盖。

·    -r：若给出的源文件是一个目录文件，此时将复制该目录下所有的子目录和文件。

·    -l：不复制文件，只是生成链接文件。

实例

cp a b;#b文件不存在时将会创建

使用指令"cp"将当前目录"test/"下的所有文件复制到新目录"newtest"下，输入如下命令：

```linux
$ cp –r test/* newtest/          
```

注意：用户使用该指令复制目录时，必须使用参数"-r"或者"-R"

 

**mv (****为文件或目录改名、或将文件或目录移入其它位置****)**

格式：mv [options] source dest

mv [options] source... directory

-i: 若指定目录已有同名文件，则先询问是否覆盖旧文件;

-f: 在mv操作要覆盖某已有的目标文件时不给任何指示;

示例：mv aa bb (将aa 更名为bb)

   mv info/ logs (将info目录放入logs目录中。注意，如果logs目录不存在，则该命令将info改名为logs)

   mv /usr/student/* . (再如将/usr/student下的所有文件和目录移到当前目录下)

 **truncate命令清空文件**

截断命令有助于收缩或文件的大小扩大到规定的尺寸。
您可以使用-s指定文件大小的选项。要清空文件内容，请使用大小为0（零），如下一个命令：

```
truncate -s 0 access.log
```

**touch (**修改文件或者目录的时间属性，包括存取时间和更改时间。若文件不存在，系统会建立一个新的文件)

使用指令"touch"修改文件"testfile"的时间属性为当前系统时间，输入如下命令：

$ touch testfile         #修改文件的时间属性

 touch newFile  (创建文件夹)

**su (****用于变更为其他使用者的身份****)**

·    -c command 或 --command=command 变更为帐号为 USER 的使用者并执行指令（command）后再变回原来使用者

示例：变更帐号为 root 并在执行 ls 指令后退出变回原使用者

su -c ls root

变更帐号为 clsung 并改变工作目录至 clsung 的家目录（home dir）

su - clsung

**sudo (****以系统管理者的身份执行指令****)**

·    -l 显示出自己（执行 sudo 的使用者）的权限

·    -v 因为 sudo 在第一次执行时或是在 N 分钟内没有执行（N 预设为五）会问密码，这个参数是重新做一次确认，如果超过 N 分钟，也会问密码

·    -k 将会强迫使用者在下一次执行 sudo 时问密码（不论有没有超过 N 分钟）

示例: 

\# sudo -u userb ls -l(指定用户执行命令)

$ sudo -u uggc vi ~www/index.html(以 uggc 用户身份编辑 home 目录下www目录中的 index.html 文件)

**less (****可以随意浏览文件，而 more 仅能向前移动，却不能向后移动，而且 less 在查看之前不会加载整个文件****)**

less [参数] 文件

·    -e 当文件显示结束后，自动离开

·    -m 显示类似more命令的百分比

·    -N 显示每行的行号

·    /字符串：向下搜索"字符串"的功能

·    ?字符串：向上搜索"字符串"的功能

·    n：重复前一个搜索（与 / 或 ? 有关）

·    N：反向重复前一个搜索（与 / 或 ? 有关）

·    Q 退出less 命令

实例

1、查看文件

less log2013.log

2、ps查看进程信息并通过less分页显示

ps -ef |less

过滤java进程

ps -ef | grep java

3、查看命令历史使用记录并通过less分页显示

[root@localhost test]# history | less

4、浏览多个文件

less log2013.log log2014.log
 输入 ：n后，切换到 log2014.log
 输入 ：p 后，切换到log2013.log

输入/my 查找”my”

 

**more (****以一页一页的形式显示，更方便使用者逐页阅读，而最基本的指令就是按空白键（space）就往下一页显示，按 b 键就会往回（back）一页显示，而且还有搜寻字串的功能（与 vi 相似）****)** 

格式：more [-dlfpcsu] [-num] [+/pattern] [+linenum] [fileNames..]

·    -num 一次显示的行数

·    -p 不以卷动的方式显示每一页，而是先清除萤幕后再显示内容

·    +/pattern 在每个文档显示前搜寻该字串（pattern），然后从该字串之后开始显示

·    +num 从第 num 行开始显示

·    fileNames 欲显示内容的文档，可为复数个数

实例

逐页显示 testfile 文档内容，如有连续两行以上空白行则以一行空白行显示。

```
more -s testfile
```

从第 20 行开始显示 testfile 之文档内容。

```
more +20 testfile
```

 

**head (****用来显示档案的开头至标准输出中，默认 head 命令打印其相应文件的开头 10 行。****)**

**常用参数：**

```
-n<行数> 显示的行数（行数为负数表示从最后向前数）
```

**实例：**

（1）显示 1.log 文件中前 20 行

```
head 1.log -n 20
```

（2）显示 1.log 文件前 20 字节

```
head -c 20 log2014.log
```

（3）显示 t.log最后 10 行

```
head -n -10 t.log
```

 

```
tail (用于显示指定文件末尾内容，不指定文件时，作为输入信息进行处理。常用查看日志文件。)
tail [参数] [文件]
-f 循环读取（常用于查看递增的日志文件）
-n<行数>显示行数（从后向前）
```



# 系统管理

```linux
ps (****用于显示当前进程 (process) 的状态。****)**
ps [options] [--help]
参数：
·    -A 列出所有的行程
·    -w 显示加宽可以显示较多的资讯
·    -au 显示较详细的资讯
·    S: 静止状态
·    T: 暂停执行
```

```
scp(网络复制)
·    -B： 使用批处理模式（传输过程中不询问传输口令或短语）
·    -C： 允许压缩。（将-C标志传递给ssh，从而打开压缩功能）
·    -r： 递归复制整个目录。
·    -P port：注意是大写的P, port是指定数据传输用到的端口号
·    scp /home/space/music/1.mp3 root@www.runoob.com:/home/root/others/music 
·    scp /home/space/music/1.mp3 root@www.runoob.com:/home/root/others/music/001.mp3 
·    复制目录命令格式：
·    scp -r local_folder remote_ip:remote_folder 
```

```
tar****使用**
tar -zxvf ./web.rar -C ./
·    -f<备份文件>或--file=<备份文件> 指定备份文件。
-v或--verbose 显示指令执行过程
·    -z或--gzip或--ungzip 通过gzip指令处理备份文件。
-x或--extract或--get 从备份文件中还原文件。
·    -C<目的目录>或--directory=<目的目录> 切换到指定的目录。
```

# vi/vim使用

vi/vim 共分为三种模式，分别是**命令模式（Command mode）**，**输入模式（Insert mode）**和**底线命令模式（Last line mode）**

### 命令模式：

```
用户刚刚启动 vi/vim，便进入了命令模式。
·    i   切换到输入模式，以输入字符。
·    x   删除当前光标所在处的字符。
·    :   切换到底线命令模式，以在最底一行输入命令。
Shift+yy  将当前行的内容放入临时缓冲区
Shift+dd  停在行首时删除整行，删除同时放入缓冲区
Shift+p    粘贴
Shift+zz    保存并退出
```



### 输入模式

```
·    字符按键以及Shift组合，输入字符
·    HOME/END，移动光标到行首/行尾
·    Insert，切换光标为输入/替换模式，光标将变成竖线/下划线
·    ESC，退出输入模式，切换到命令模式
```

### 底线命令模式

```shell
·    q 退出程序
·    w 保存文件
    noh 退出高亮
按ESC键可退出底线命令模式。
//关闭行号
：set nonumber
:set nonu
//开启行号
：set number
:set nu
```



### 删除、复制与粘贴

| **按键与命令**                       | **作用**                                                     |
| ------------------------------------ | ------------------------------------------------------------ |
| x, X                                 | 在一行字当中，x 为向后删除一个字符 (相当于 [del] 按键)， X 为向前删除一个字符(相当于  [backspace] 亦即是退格键) (常用) |
| nx                                   | n 为数字，连续向后删除 n  个字符。举例来说，我要连续删除 10 个字符， 『10x』。 |
| dd                                   | 删除游标所在的那一整行(常用)                                 |
| ndd                                  | n 为数字。删除光标所在的向下 n 行，例如 20dd 则是删除  20 行 (常用) |
| d1G                                  | 删除光标所在到第一行的所有数据                               |
| dG                                   | 删除光标所在到最后一行的所有数据                             |
| d$                                   | 删除游标所在处，到该行的最后一个字符                         |
| d0                                   | 那个是数字的 0 ，删除游标所在处，到该行的最前面一个字符      |
| yy                                   | 复制游标所在的那一行(常用)                                   |
| nyy                                  | n 为数字。复制光标所在的向下 n 行，例如 20yy 则是复制  20 行(常用) |
| y1G                                  | 复制游标所在行到第一行的所有数据                             |
| yG                                   | 复制游标所在行到最后一行的所有数据                           |
| y0                                   | 复制光标所在的那个字符到该行行首的所有数据                   |
| y$                                   | 复制光标所在的那个字符到该行行尾的所有数据                   |
| p, P                                 | p 为将已复制的数据在光标下一行贴上，P 则为贴在游标上一行！ 举例来说，我目前光标在第 20 行，且已经复制了 10 行数据。则按下 p 后， 那  10 行数据会贴在原本的 20 行之后，亦即由 21 行开始贴。但如果是按下 P 呢？ 那么原本的第 20 行会被推到变成 30 行。 (常用) |
| J                                    | 将光标所在行与下一行的数据结合成同一行                       |
| c                                    | 重复删除多个数据，例如向下删除 10 行，[ 10cj ]               |
| u                                    | 撤销，复原前一个动作。(常用)                                 |
| [Ctrl]+r                             | 重做上一个动作。(常用)                                       |
| 这个 u 与  [Ctrl]+r 是很常用的指令！ | 一个是复原，另一个则是重做一次～ 利用这两个功能按键，你的编辑，嘿嘿！很快乐的啦！ |
| `.`                                  | 不要怀疑！这就是小数点！意思是重复前一个动作的意思。 如果你想要重复删除、重复贴上等等动作，按下小数点『.』就好了！ (常用) |

# 项目常用命令

磁盘使用情况：df -h , du -h

删除当前文件下子目录和文件 rm -rf ./*

日志循环显示 tail -fn 100 

#  权限

chmod 命令是控制用户对文件的权限的命令

其中：

- u 表示该文件的拥有者，g 表示与该文件的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是。
- \+ 表示增加权限、- 表示取消权限、= 表示唯一设定权限。
- r 表示可读取，w 表示可写入，x 表示可执行，X 表示只有当该文件是个子目录或者该文件已经被设定过为可执行。

其他参数说明：

- -c : 若该文件权限确实已经更改，才显示其更改动作
- -f : 若该文件权限无法被更改也不要显示错误讯息
- -v : 显示权限变更的详细资料
- -R : 对目前目录下的所有文件与子目录进行相同的权限变更(即以递归的方式逐个变更)
- --help : 显示辅助说明
- --version : 显示版本

### 更多说明

| `命令`                                     | 说明                                                         |
| :----------------------------------------- | :----------------------------------------------------------- |
| `chmod a+r file`                           | 给file的所有用户增加读权限                                   |
| `chmod a-x file`                           | 删除file的所有用户的执行权限                                 |
| `chmod a+rw file`                          | 给file的所有用户增加读写权限                                 |
| `chmod +rwx file`                          | 给file的所有用户增加读写执行权限                             |
| `chmod u=rw,go= file`                      | 对file的所有者设置读写权限，清空该用户组和其他用户对file的所有权限（空格代表无权限） |
| `chmod -R u+r,go-r docs`                   | 对目录docs和其子目录层次结构中的所有文件给用户增加读权限，而对用户组和其他用户删除读权限 |
| `chmod 664 file`                           | 对file的所有者和用户组设置读写权限, 为其其他用户设置读权限   |
| `chmod 0755 file`                          | 相当于`u=rwx (4+2+1),go=rx (4+1 & 4+1)`。`0` 没有特殊模式。  |
| `chmod 4755 file`                          | `4`设置了设置[用户ID](https://www.runoob.com/wiki/用户ID)位，剩下的相当于 u=rwx (4+2+1),go=rx (4+1 & 4+1)。 |
| `find path/ -type d -exec chmod a-x {} \;` | 删除可执行权限对path/以及其所有的目录（不包括文件）的所有用户，使用'-type f'匹配文件 |
| `find path/ -type d -exec chmod a+x {} \;` | 允许所有用户浏览或通过目录path/                              |

useradd
新增用户
root># useradd user1

新增用户时指定组
useradd user2 -g group1


删除用户：userdel 选项 用户名
常用的选项是 -r，它的作用是把用户的主目录一起删除。例如：# userdel -r sam
groupadd
 groupadd group1
修改帐号：# usermod -G wheel,mysql,coomix user1
改密码：passwd 选项 用户名
-l 锁定口令，即禁用账号。
-u 口令解锁。
-d 使账号无口令。
-f 强迫用户下次登录时修改口令。
查看用户所属组
root># id user1

passwd
usermod查看一个指定用户（user02）所属组的其它成员

groups user02

改变文件/目录的属性：  -R表示递归操作目录下面的子目录及文件

改变文件/目录所属的组：
chgrp –R group1 /home/user1/test    #将test目录所属用户组变更为group1

**chown**:设置文件所有者和文件关联组的命令

改变文件/目录所有者：
chown –R user2 /home/user1/test    #将test目录所有者改为user2

一次性改变文件/目录的所有者和所属组：
chown -R user1:group1 /u01/app/   -R级联操作子目录

chmod g+w+x+r /home/user01//使拥有群组有rwx权限
o：其他；g:群组；a：所有人；u：拥有者
将目前目录下的所有文件与子目录皆设为任何人可读取 :chmod -R a+r *

**touch**

- **参数说明**：
- a 改变档案的读取时间记录。
- m 改变档案的修改时间记录。
- c 假如目的档案不存在，不会建立新的档案。与 --no-create 的效果一样。
- f 不使用，是为了与其他 unix 系统的相容性而保留。
- r 使用参考档的时间记录，与 --file 的效果一样。
- d 设定时间与日期，可以使用各种不同的格式。
- t 设定档案的时间记录，格式与 date 指令相同。
- --no-create 不会建立新档案。
- --help 列出指令格式。
- --version 列出版本讯息。

利用touch指令将文件的日期修改为指定日期

touch  -d  "指定日期"  file 

